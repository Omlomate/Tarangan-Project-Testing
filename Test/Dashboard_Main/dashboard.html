<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            text-decoration: none;
        }
    </style>
</head>

<body>

    <h2>Dashboard</h2>

    <button class="button" onclick="navigate_to_age_calculator()">Age Calculator</button>
    <!-- Button click event for navigating to Age Calculator activity-->
    <button class="button" onclick="navigateTo_register_student()">Register Student</button>
    <!-- Button click event for navigating to Register Student activity-->
    <button class="button" onclick="navigateTo_search_student()">Search Student</button>
    <!-- Button click event for navigating to Search Student activity-->
    <button class="button" onclick="navigateTo_register_teacher()">Register Teacher</button>
    <!-- Button click event for navigating to Register Teacher activity-->
    <button class="button" onclick="navigateTo_search_teacher()">Search Teacher</button>
    <!-- Button click event for navigating to Signout activity-->
    <button class="button" id="logoutButton">Signout</button> <!-- Button click event for Signingout-->


    <!-- Functions to navigate from Dashboard to different activities/pages -->
    <script>


        function navigate_to_age_calculator() {
            window.location.href = "/age-calculator";
        }

        function navigateTo_register_student() {
            window.location.href = "/register-student";
        }

        function navigateTo_search_student() {
            window.location.href = "/search-student";
        }

        function navigateTo_register_teacher() {
            window.location.href = "/register-teacher";


        }

        function navigateTo_search_teacher() {
            window.location.href = "/search-teacher";
            // alert("Feature yet to be released!")

        }

        document.getElementById('logoutButton').addEventListener('click', function () {
            // Make an AJAX request to logout route
            const confirmation = confirm(`Are you sure you want to logout ?`);
            if (confirmation) {
                fetch('/logout', {
                    method: 'GET',
                    credentials: 'same-origin' // Send cookies with the request
                })
                    .then(response => {
                        if (response.ok) {
                            // Redirect to homepage or login page
                            window.location.href = '/';
                        } else {
                            console.error('Logout failed');
                        }
                    })
                    .catch(error => console.error('Error during logout:', error));
            };
        })

        // Add an event listener for the popstate event
        window.addEventListener('popstate', function (event) {
            // Make an AJAX request to logout route
            const confirmation = confirm(`Are you sure you want to logout ?`);
            if (confirmation) {
                fetch('/logout', {
                    method: 'GET',
                    credentials: 'same-origin' // Send cookies with the request
                })
                    .then(response => {
                        if (response.ok) {
                            // Redirect to homepage or login page
                            window.location.href = '/';
                        } else {
                            console.error('Logout failed');
                        }
                    })
                    .catch(error => console.error('Error during logout:', error));
            };
        });

        // Push a new state to the history when the page is loaded
        window.history.pushState(null, null, window.location.href);



    </script>

    <script src="handle_session.js></script>

</body>

</html>